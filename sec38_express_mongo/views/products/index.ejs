<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Product List</h1>
    <form action="/products" method="GET">
        <label for="category">Category Filter</label>
        <select id="category" name="category">
            <% for (let c of categories) {%>
                <option value="<%= c%>" <%= c === category ? 'selected' : '' %>>
                    <%= c%>
                </option>
            <% }%>
        </select>
        <button type="submit">Filter</button>
    </form>
    <% if(products && products.length> 0) { %>
        <ul>
            <% products.forEach(product=> { %>
                <li><a href="/products/<%= product._id %>">
                        <%= product.name %>
                    </a>- $<%= product.price %> - <%= product.category %>
                </li>

                <% }) %>
        </ul>
        <% } else { %>
            <p>No products found</p>
            <% } %>
                <a href="/products/new">Create New Product</a>
</body>

</html>